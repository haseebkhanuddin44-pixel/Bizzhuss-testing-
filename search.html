<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Search — bizzhuss</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.4/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <meta name="theme-color" content="#0B6EF6">
</head>
<body>
  <header class="header-nav">
    <nav class="navbar navbar-expand-md">
      <div class="container-lg header-inner">
        <a class="brand-logo navbar-brand text-decoration-none" href="index.html">Bizzhuss</a>
        <button class="navbar-toggler ms-2" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-center" id="mainNav">
          <ul class="navbar-nav mb-2 mb-md-0">
            <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
            <li class="nav-item"><a class="nav-link" href="track.html">Track Order</a></li>
            <li class="nav-item"><a class="nav-link" href="account.html">My Account</a></li>
          </ul>
        </div>
        <div class="d-flex gap-2 align-items-center ms-auto">
          <button class="btn btn-link text-white nav-search-btn" aria-label="Search"><i class="bi bi-search fs-5"></i></button>
          <a href="favourites.html" class="text-white ms-2" aria-label="Favourites"><i class="bi bi-heart fs-5"></i></a>
          <a href="cart.html" class="text-white ms-2 position-relative" aria-label="Cart"><i class="bi bi-cart fs-5"></i><span class="badge bg-danger cart-count position-absolute top-0 start-100 translate-middle">0</span></a>
        </div>
      </div>
    </nav>
  </header>

  <main class="container-lg my-4 animate-on-scroll">
    <!-- page search (main) — top search input retained here for site search page -->
    <div class="mb-3">
      <div class="d-flex align-items-center border rounded px-2 py-1" role="search">
        <input id="search-input" class="form-control border-0" placeholder="Search products" aria-label="Search" />
        <button id="search-go" class="btn btn-link text-primary"><i class="bi bi-search fs-5"></i></button>
      </div>
    </div>
    <div class="d-flex justify-content-between align-items-center mb-3">
      <div>
        <h4 class="mb-0">Search products</h4>
        <small class="text-muted">Find products by name, category or tag</small>
      </div>
      <div>
        <label class="small text-muted me-2">Sort</label>
        <select id="sort-select" class="form-select form-select-sm d-inline-block" style="width:auto;">
          <option value="popular">Most popular</option>
          <option value="price-asc">Price low → high</option>
          <option value="price-desc">Price high → low</option>
          <option value="rating">Top rated</option>
        </select>
      </div>
    </div>

    <div class="row g-4">
      <aside class="col-12 col-md-3">
        <div class="p-3 rounded card-product">
          <h6>Filters</h6>
          <label class="form-label mt-2 small">Category</label>
          <select id="filter-category" class="form-select form-select-sm">
            <option value="">All</option>
            <option>Audio</option>
            <option>Accessories</option>
            <option>Home</option>
            <option>Footwear</option>
            <option>Fitness</option>
            <option>Travel</option>
          </select>

          <label class="form-label mt-3 small">Price</label>
          <div class="d-flex gap-2">
            <input id="price-min" class="form-control form-control-sm" type="number" placeholder="Min">
            <input id="price-max" class="form-control form-control-sm" type="number" placeholder="Max">
          </div>

          <label class="form-label mt-3 small">Rating</label>
          <select id="filter-rating" class="form-select form-select-sm">
            <option value="0">Any</option>
            <option value="4">4★ & up</option>
            <option value="4.5">4.5★ & up</option>
          </select>
          <div class="mt-3 d-grid">
            <button id="apply-filter" class="btn btn-primary btn-sm">Apply</button>
            <button id="clear-filter" class="btn btn-outline-secondary btn-sm mt-2">Clear</button>
          </div>
        </div>
      </aside>

      <section class="col-12 col-md-9">
        <div class="row g-3" id="search-results-grid"></div>
      </section>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container-lg">
      <div class="footer-grid py-3">
        <div>
          <h5 class="text-white mb-2">About Us</h5>
          <p class="small text-white-75 mb-0">bizzhuss builds thoughtfully designed everyday essentials — minimal, high-quality, and priced fairly. Demo storefront for UI showcase.</p>
        </div>
        <div>
          <h5 class="text-white mb-2">Quick Links</h5>
          <ul class="list-unstyled small mb-0 text-white-75">
            <li><a href="index.html">Home</a></li>
            <li><a href="cart.html">Cart</a></li>
            <li><a href="favourites.html">Favourites</a></li>
            <li><a href="account.html">Account</a></li>
          </ul>
        </div>
        <div>
          <h5 class="text-white mb-2">Contact Info</h5>
          <div class="small text-white-75">support@bizzhuss.example</div>
          <div class="small text-white-75">+1 (555) 123-4567</div>
          <div class="small text-white-75 mt-2">500 Commerce St, Suite 100<br>San Francisco, CA</div>
        </div>
      </div>
      <div class="border-top pt-3 mt-3 d-flex flex-column flex-md-row justify-content-between align-items-center gap-2">
        <div class="small text-white-50">© <strong>bizzhuss</strong> — Crafted with care</div>
        <div class="small text-white-50">Privacy • Terms • Cookies</div>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/app.js"></script>
  <script>
    (function(){
      const applyBtn=document.getElementById('apply-filter');
      const clearBtn=document.getElementById('clear-filter');
      const sortSelect=document.getElementById('sort-select');

      function runSearch(){
        const q=document.getElementById('search-input').value || new URLSearchParams(location.search).get('q') || '';
        const cat=document.getElementById('filter-category').value;
        const min=parseFloat(document.getElementById('price-min').value || 0);
        const max=parseFloat(document.getElementById('price-max').value || 999999);
        const rating=parseFloat(document.getElementById('filter-rating').value || 0);

        let results = window.bizzhuss.products.filter(p=>{ const qMatch = !q || p.title.toLowerCase().includes(q.toLowerCase()) || p.description.toLowerCase().includes(q.toLowerCase()); const catMatch = !cat || p.category === cat; const price = p.salePrice || p.price; const priceMatch = price >= min && price <= max; const ratingMatch = p.rating >= rating; return qMatch && catMatch && priceMatch && ratingMatch; });

        const sort=sortSelect.value;
        if(sort==='price-asc') results.sort((a,b)=>(a.salePrice||a.price) - (b.salePrice||b.price));
        if(sort==='price-desc') results.sort((a,b)=>(b.salePrice||b.price) - (a.salePrice||a.price));
        if(sort==='rating') results.sort((a,b)=> b.rating - a.rating);

        if(results.length===0) document.getElementById('search-results-grid').innerHTML=`<div class="search-results-empty">No results</div>`;
        else window.renderGrid('#search-results-grid', results);
      }

      applyBtn.addEventListener('click', runSearch);
      clearBtn.addEventListener('click', ()=>{ document.getElementById('filter-category').value=''; document.getElementById('price-min').value=''; document.getElementById('price-max').value=''; document.getElementById('filter-rating').value='0'; runSearch(); });

      const urlQ=new URLSearchParams(location.search).get('q') || '';
      if(urlQ) document.getElementById('search-input').value = urlQ;
      runSearch();
    })();
  </script>
</body>
</html>
